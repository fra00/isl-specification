/**
 * ðŸ›‘ DO NOT EDIT THIS FILE DIRECTLY
 * ----------------------------------
 * This file was generated by ISL Compiler.
 * Source: ui.isl.md
 * Edit the ISL file instead.
 */

import React, { useCallback } from 'react';
import { CardState } from "./domain";

/**
 * CardComponent is a presentation component that displays a single card
 * with its state (covered, flipped, or solved) and handles click interactions.
 */
export default function CardComponent({ card, onFlip }) {
  /**
   * handleClick triggers the onFlip callback if the card is in a flippable state (CardState.Covered).
   * It uses useCallback to ensure stability and prevent unnecessary re-renders of child components
   * if this function were passed down.
   */
  const handleClick = useCallback(() => {
    if (card.state === CardState.Covered) {
      onFlip(card.id);
    }
  }, [card.state, card.id, onFlip]); // Dependencies for useCallback

  // Determine base classes for the card container
  const baseCardClasses = `
    relative w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 lg:w-48 lg:h-48
    rounded-lg shadow-md transition-all duration-300
    flex items-center justify-center
  `;

  // Determine interactive and state-specific classes
  const interactiveClasses = card.state === CardState.Covered
    ? 'cursor-pointer hover:scale-105'
    : 'pointer-events-none'; // Disable clicks on flipped or solved cards

  const solvedClasses = card.state === CardState.Solved
    ? 'opacity-50' // Faded appearance for solved cards
    : '';

  // Classes for the card's visual content (back or front)
  const contentClasses = `
    absolute inset-0 rounded-lg flex items-center justify-center
    text-4xl font-bold transition-opacity duration-300
  `;

  return (
    <div
      className={`${baseCardClasses} ${interactiveClasses} ${solvedClasses}`}
      onClick={handleClick}
    >
      {/* Card Back - visible when state is Covered */}
      {card.state === CardState.Covered && (
        <div className={`${contentClasses} bg-blue-500 text-white`}>
          ?
        </div>
      )}

      {/* Card Front (Value) - visible when state is Flipped or Solved */}
      {(card.state === CardState.Flipped || card.state === CardState.Solved) && (
        <div className={`${contentClasses} bg-white text-gray-800`}>
          {card.value}
        </div>
      )}
    </div>
  );
}