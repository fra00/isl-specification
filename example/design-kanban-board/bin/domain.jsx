/**
 * ðŸ›‘ DO NOT EDIT THIS FILE DIRECTLY
 * ----------------------------------
 * This file was generated by ISL Compiler.
 * Source: domain.isl.md
 * Edit the ISL file instead.
 */

/**
 * An enumeration representing the urgency level of a task.
 */
export const PriorityType = {
  LOW: 'LOW',
  MEDIUM: 'MEDIUM',
  HIGH: 'HIGH',
};

/**
 * Represents a single task within a Kanban column.
 * @param {object} data - The initial data for the task.
 * @param {string} [data.id=''] - A unique identifier for the task.
 * @param {string} [data.title=''] - The title of the task.
 * @param {string} [data.description=''] - A detailed description of the task.
 * @param {string} [data.dueDate=''] - The target completion date for the task (YYYY-MM-DD).
 * @param {string} [data.priority=PriorityType.LOW] - The urgency level of the task.
 * @returns {object} A new TaskEntity object.
 */
export const TaskEntity = (data = {}) => {
  const {
    id = '',
    title = '',
    description = '',
    dueDate = '',
    priority = PriorityType.LOW,
  } = data;

  // Ensure priority is one of the valid types, otherwise default to LOW
  const validPriority = Object.values(PriorityType).includes(priority) ? priority : PriorityType.LOW;

  return {
    id,
    title,
    description,
    dueDate,
    priority: validPriority,
  };
};

/**
 * Represents a column on the Kanban board, containing a collection of tasks.
 * @param {object} data - The initial data for the column.
 * @param {string} [data.id=''] - A unique identifier for the column.
 * @param {string} [data.title=''] - The title of the column.
 * @param {Array<object>} [data.tasks=[]] - An ordered list of tasks within this column.
 * @returns {object} A new ColumnEntity object.
 */
export const ColumnEntity = (data = {}) => {
  const {
    id = '',
    title = '',
    tasks = [],
  } = data;

  // Ensure tasks are instantiated using TaskEntity factory
  const processedTasks = Array.isArray(tasks)
    ? tasks.map(taskData => TaskEntity(taskData))
    : [];

  return {
    id,
    title,
    tasks: processedTasks,
  };
};

/**
 * Represents the entire Kanban board, comprising multiple columns.
 * @param {object} data - The initial data for the board.
 * @param {string} [data.id=''] - A unique identifier for the board.
 * @param {Array<object>} [data.columns=[]] - An ordered list of columns on the board.
 * @returns {object} A new BoardEntity object.
 */
export const BoardEntity = (data = {}) => {
  const {
    id = '',
    columns = [],
  } = data;

  // Ensure columns are instantiated using ColumnEntity factory
  const processedColumns = Array.isArray(columns)
    ? columns.map(columnData => ColumnEntity(columnData))
    : [];

  return {
    id,
    columns: processedColumns,
  };
};