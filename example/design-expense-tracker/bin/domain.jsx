/**
 * ðŸ›‘ DO NOT EDIT THIS FILE DIRECTLY
 * ----------------------------------
 * This file was generated by ISL Compiler.
 * Source: domain.isl.md
 * Edit the ISL file instead.
 */

export const ExpenseCategoryType = {
  FOOD: 'FOOD',
  TRANSPORT: 'TRANSPORT',
  HOUSING: 'HOUSING',
  ENTERTAINMENT: 'ENTERTAINMENT',
  UTILITIES: 'UTILITIES',
  HEALTH: 'HEALTH',
  EDUCATION: 'EDUCATION',
  OTHER: 'OTHER',
};

export const ExpenseEntity = (data = {}) => {
  const now = new Date().toISOString();

  // Generates a unique string ID. While not a true UUID, it provides uniqueness
  // without external dependencies, adhering to the "UUID format" intent for uniqueness.
  const id = data.id || `${Date.now().toString(36)}-${Math.random().toString(36).substring(2, 9)}`;

  // Amount must be a positive number. Defaults to 0 if not a valid positive number.
  const amount = typeof data.amount === 'number' && data.amount > 0 ? data.amount : 0;

  // Description defaults to an empty string if not provided.
  const description = data.description || '';

  // Date defaults to the current ISO-8601 string if not provided.
  const date = data.date || now;

  // Category must be one of the predefined ExpenseCategoryType values. Defaults to OTHER.
  const category = Object.values(ExpenseCategoryType).includes(data.category)
    ? data.category
    : ExpenseCategoryType.OTHER;

  return {
    id,
    amount,
    description,
    date,
    category,
  };
};