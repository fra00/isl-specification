/**
 * ðŸ›‘ DO NOT EDIT THIS FILE DIRECTLY
 * ----------------------------------
 * This file was generated by ISL Compiler.
 * Source: expense-list.isl.md
 * Edit the ISL file instead.
 */

import React from 'react';

// The REAL IMPLEMENTATION CONTEXT specifies ExpenseEntity as a factory function.
// We are importing the factory itself, but the component will receive objects
// that conform to the structure returned by this factory.
// The path is relative based on the target implementation paths:
// TARGET IMPLEMENTATION PATH: ./expense-list
// IMPLEMENTATION PATH for domain: ./domain
// So, from ./expense-list to ./domain is './domain'.
import { ExpenseEntity } from './domain';

// Helper function to format currency
const formatCurrency = (amount) => {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'EUR',
    minimumFractionDigits: 2,
    maximumFractionDigits: 2,
  }).format(amount);
};

// Helper function to format date
const formatDate = (isoDateString) => {
  if (!isoDateString) return '';
  try {
    const date = new Date(isoDateString);
    // Check if date is valid
    if (isNaN(date.getTime())) {
      return isoDateString; // Return original if invalid
    }
    return new Intl.DateTimeFormat('en-US', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
    }).format(date);
  } catch (e) {
    // Fallback in case of parsing error
    return isoDateString;
  }
};

/**
 * ExpenseList Component
 * Displays a list of financial expenses and their total.
 *
 * @param {object} props - The component props.
 * @param {Array<object>} props.expenses - The list of expenses to display. Each expense should conform to ExpenseEntity structure.
 * @param {number} props.total - The total sum of all expenses.
 */
export default function ExpenseList({ expenses = [], total = 0 }) {
  return (
    <div className="p-4 bg-white shadow-md rounded-lg">
      <h2 className="text-2xl font-bold text-gray-800 mb-4">Expense List</h2>

      <div className="mb-6 p-3 bg-blue-50 border-l-4 border-blue-500 text-blue-800">
        <h3 className="text-lg font-semibold">Total Expenses:</h3>
        <p className="text-3xl font-extrabold text-blue-700">
          {formatCurrency(total)}
        </p>
      </div>

      {expenses.length === 0 ? (
        <p className="text-gray-600 italic">No expenses recorded yet.</p>
      ) : (
        <ul className="space-y-3">
          {expenses.map((expense) => (
            <li key={expense.id} className="p-4 border border-gray-200 rounded-md bg-gray-50 flex flex-col sm:flex-row sm:justify-between sm:items-center">
              <div className="flex-grow mb-2 sm:mb-0">
                <p className="text-lg font-semibold text-gray-900">{expense.description}</p>
                <p className="text-sm text-gray-600">Category: <span className="font-medium">{expense.category}</span></p>
              </div>
              <div className="flex-shrink-0 text-right">
                <p className="text-xl font-bold text-green-700">{formatCurrency(expense.amount)}</p>
                <p className="text-xs text-gray-500">{formatDate(expense.date)}</p>
              </div>
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}