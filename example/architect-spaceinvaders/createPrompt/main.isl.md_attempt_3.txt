--- ROLE: system ---

You are an expert ISL Developer. You are part of a team building the project "SpaceInvadersClone".

**YOUR TASK**:
Write the content for the file: **main.isl.md**

**CONTEXT**:
- **Role**: Presentation
- **Description**: The main entry point and orchestrator of the Space Invaders application. It initializes the game logic, sets up the primary game loop, handles global user input events, and combines all presentation components to render the complete application.
- **Dependencies**: ["game-logic.isl.md","game-board-presentation.isl.md","game-ui-presentation.isl.md","game-domain.isl.md"]

**DEPENDENCY INTERFACES (Read-Only)**:

--- INTERFACE: game-logic.isl.md ---
## Component: GameLogic
### Role: Business Logic
**Signature**: `GameLogic()`
### Capabilities
#### initializeGame
**Contract**: Sets up the initial game state, ready for the start screen.
**Signature**: `()` => `GameState`

#### startGame
**Contract**: Transitions the game from the start screen to active play, or restarts a new game.
**Signature**: `(initialState: GameState)` => `GameState`

#### startLevel
**Contract**: Initializes the game state for a specific level.
**Signature**: `(currentState: GameState, levelNumber: number)` => `GameState`

#### updateGame
**Contract**: Advances the game state by one tick, handling all game logic.
**Signature**: `(currentState: GameState, deltaTime: number, currentTime: number)` => `GameState`

#### movePlayer
**Contract**: Updates the player's position based on a given direction, respecting game boundaries.
**Signature**: `(currentState: GameState, direction: `> **Reference**: `DirectionEnum.LEFT | DirectionEnum.RIGHT` in `./game-domain.isl.md` `)` => `GameState`

#### playerShoot
**Contract**: Creates a new player bullet if the shooting cooldown has passed.
**Signature**: `(currentState: GameState, currentTime: number)` => `GameState`

#### pauseGame
**Contract**: Pauses the game if it is currently playing.
**Signature**: `(currentState: GameState)` => `GameState`

#### resumeGame
**Contract**: Resumes the game if it is currently paused.
**Signature**: `(currentState: GameState)` => `GameState`

#### nextLevel
**Contract**: Advances the game to the next level if the current level is cleared.
**Signature**: `(currentState: GameState)` => `GameState`

#### resetGame
**Contract**: Resets the entire game to its initial state, as if just launched.
**Signature**: `(currentState: GameState)` => `GameState`

### ðŸš¨ Global Constraints
- All entity IDs generated by `GameLogic` MUST be unique.
- Player bullets and invader bullets MUST NOT collide with each other.
- Player bullets MUST NOT collide with the player.
- Invader bullets MUST NOT collide with invaders.
- The game MUST correctly handle all `GameStatusEnum` transitions.
- The `nextEntityId` counter MUST always increment and provide unique IDs.
- Invader speed and bullet frequency MUST increase with each level and each time invaders change direction.
- The game MUST support at least 10 levels as defined by `MAX_LEVELS`.

--- INTERFACE: game-board-presentation.isl.md ---
## Component: GameBoardPresentation
### Role: Presentation
**Signature**: - `renderingContext`: `any` - The context (e.g., HTML Canvas 2D context) on which to draw.
- `gameWidth`: `number` - The width of the game board. > **Reference**: `GameConstants.GAME_WIDTH` in `./game-domain.isl.md`
- `gameHeight`: `number` - The height of the game board. > **Reference**: `GameConstants.GAME_HEIGHT` in `./game-domain.isl.md`
### Capabilities
#### renderGameBoard
**Contract**: Renders all active game entities (player, invaders, and bullets) onto the game board using the provided rendering context. It ensures the previous frame is cleared before drawing the new one, providing a smooth animation.
**Signature**: - `playerState`: > **Reference**: `PlayerState` in `./game-domain.isl.md`
- `invaderStates`: `Array<`> **Reference**: `InvaderState` in `./game-domain.isl.md`>`
- `bulletStates`: `Array<`> **Reference**: `BulletState` in `./game-domain.isl.md`>`

--- INTERFACE: game-ui-presentation.isl.md ---
## Component: GameUIPresentation
### Role: Presentation
**Signature**: - `currentStatus`: > **Reference**: `GameStatusEnum` in `./game-domain.isl.md` - The current state of the game.
- `playerScore`: `number` - The current score of the player.
- `playerLives`: `number` - The remaining lives of the player.
- `currentLevel`: `number` - The current level number.
- `gameWidth`: `number` - The width of the game display area.
- `gameHeight`: `number` - The height of the game display area.
### Capabilities
#### renderUI
**Contract**: Renders the appropriate user interface elements, including the header information and any active game status overlays, based on the provided game state.
- **Signature**:
    - Input:
        - `status`: > **Reference**: `GameStatusEnum` in `./game-domain.isl.md`
        - `score`: `number`
        - `lives`: `number`
        - `level`: `number`
        - `gameWidth`: `number`
        - `gameHeight`: `number`
    - Output: `void` (renders directly to the display)
- **Trigger**: Requested by the main application orchestrator whenever the game state changes or requires a visual update.
- **Flow**:
    1.  Display the header bar elements (score, lives, level) at the top of the screen, using `gameWidth` for layout.
    2.  **IF** `status` is > **Reference**: `GameStatusEnum.START_SCREEN` in `./game-domain.isl.md` **THEN**:
        - Display the "SPACE INVADERS" title and "PRESS START TO PLAY" message, centered within `gameWidth` and `gameHeight`.
    3.  **ELSE IF** `status` is > **Reference**: `GameStatusEnum.PAUSED` in `./game-domain.isl.md` **THEN**:
        - Display the "PAUSED" message, centered within `gameWidth` and `gameHeight`.
    4.  **ELSE IF** `status` is > **Reference**: `GameStatusEnum.GAME_OVER` in `./game-domain.isl.md` **THEN**:
        - Display the "GAME OVER" message and "YOUR SCORE: [score]", centered within `gameWidth` and `gameHeight`.
    5.  **ELSE IF** `status` is > **Reference**: `GameStatusEnum.LEVEL_CLEARED` in `./game-domain.isl.md` **THEN**:
        - Display "LEVEL [level] CLEARED!" and "PREPARING FOR LEVEL [level + 1]..." messages, centered within `gameWidth` and `gameHeight`.
    6.  **ELSE IF** `status` is > **Reference**: `GameStatusEnum.GAME_WON` in `./game-domain.isl.md` **THEN**:
        - Display "CONGRATULATIONS! YOU SAVED THE GALAXY!" and "TOTAL SCORE: [score]" messages, centered within `gameWidth` and `gameHeight`.
    7.  **ELSE** (if `status` is > **Reference**: `GameStatusEnum.PLAYING` in `./game-domain.isl.md`):
        - No additional full-screen overlay messages are displayed.
- **Side Effects**: Updates the visual representation of the game's user interface on the display.
- **âœ… Acceptance Criteria**:
    - The current score, remaining lives, and current level number are always displayed in the header during active gameplay and on status screens.
    - When the game status is `START_SCREEN`, the appropriate start message is displayed centrally.
    - When the game status is `PAUSED`, the "PAUSED" message is displayed centrally.
    - When the game status is `GAME_OVER`, the "GAME OVER" message along with the final score is displayed centrally.
    - When the game status is `LEVEL_CLEARED`, a message indicating the cleared level and the upcoming level is displayed centrally.
    - When the game status is `GAME_WON`, a victory message and the total score are displayed centrally.
    - No overlay messages are displayed when the game status is `PLAYING`.
    - All displayed text is clearly legible and correctly formatted.
- **ðŸ§ª Test Scenarios**:
    - **Scenario**: Initial Game State (Start Screen)
        - **Given**: The game has just started.
        - **When**: `renderUI` is called with `status` = `START_SCREEN`, `score` = 0, `lives` = 3, `level` = 1.
        - **Then**: The header displays "SCORE: 0", "LIVES: 3", "LEVEL: 1". A central overlay displays "SPACE INVADERS" and "PRESS START TO PLAY".
    - **Scenario**: Active Gameplay
        - **Given**: The game is in progress.
        - **When**: `renderUI` is called with `status` = `PLAYING`, `score` = 250, `lives` = 2, `level` = 3.
        - **Then**: The header displays "SCORE: 250", "LIVES: 2", "LEVEL: 3". No central overlay message is displayed.
    - **Scenario**: Game Paused
        - **Given**: The game is paused by the player.
        - **When**: `renderUI` is called with `status` = `PAUSED`, `score` = 500, `lives` = 1, `level` = 5.
        - **Then**: The header displays "SCORE: 500", "LIVES: 1", "LEVEL: 5". A central overlay displays "PAUSED".
    - **Scenario**: Level Successfully Cleared
        - **Given**: The player has defeated all invaders in the current level.
        - **When**: `renderUI` is called with `status` = `LEVEL_CLEARED`, `score` = 1000, `lives` = 2, `level` = 7.
        - **Then**: The header displays "SCORE: 1000", "LIVES: 2", "LEVEL: 7". A central overlay displays "LEVEL 7 CLEARED!" and "PREPARING FOR LEVEL 8...".
    - **Scenario**: Game Over
        - **Given**: The player has lost all lives.
        - **When**: `renderUI` is called with `status` = `GAME_OVER`, `score` = 1500, `lives` = 0, `level` = 9.
        - **Then**: The header displays "SCORE: 1500", "LIVES: 0", "LEVEL: 9". A central overlay displays "GAME OVER" and "YOUR SCORE: 1500".
    - **Scenario**: Game Won
        - **Given**: The player has completed all levels.
        - **When**: `renderUI` is called with `status` = `GAME_WON`, `score` = 20000, `lives` = 3, `level` = 10.
        - **Then**: The header displays "SCORE: 20000", "LIVES: 3", "LEVEL: 10". A central overlay displays "CONGRATULATIONS! YOU SAVED THE GALAXY!" and "TOTAL SCORE: 20000".
**Signature**: - Input:
        - `status`: > **Reference**: `GameStatusEnum` in `./game-domain.isl.md`
        - `score`: `number`
        - `lives`: `number`
        - `level`: `number`
        - `gameWidth`: `number`
        - `gameHeight`: `number`
    - Output: `void` (renders directly to the display)
- **Trigger**: Requested by the main application orchestrator whenever the game state changes or requires a visual update.
- **Flow**:
    1.  Display the header bar elements (score, lives, level) at the top of the screen, using `gameWidth` for layout.
    2.  **IF** `status` is > **Reference**: `GameStatusEnum.START_SCREEN` in `./game-domain.isl.md` **THEN**:
        - Display the "SPACE INVADERS" title and "PRESS START TO PLAY" message, centered within `gameWidth` and `gameHeight`.
    3.  **ELSE IF** `status` is > **Reference**: `GameStatusEnum.PAUSED` in `./game-domain.isl.md` **THEN**:
        - Display the "PAUSED" message, centered within `gameWidth` and `gameHeight`.
    4.  **ELSE IF** `status` is > **Reference**: `GameStatusEnum.GAME_OVER` in `./game-domain.isl.md` **THEN**:
        - Display the "GAME OVER" message and "YOUR SCORE: [score]", centered within `gameWidth` and `gameHeight`.
    5.  **ELSE IF** `status` is > **Reference**: `GameStatusEnum.LEVEL_CLEARED` in `./game-domain.isl.md` **THEN**:
        - Display "LEVEL [level] CLEARED!" and "PREPARING FOR LEVEL [level + 1]..." messages, centered within `gameWidth` and `gameHeight`.
    6.  **ELSE IF** `status` is > **Reference**: `GameStatusEnum.GAME_WON` in `./game-domain.isl.md` **THEN**:
        - Display "CONGRATULATIONS! YOU SAVED THE GALAXY!" and "TOTAL SCORE: [score]" messages, centered within `gameWidth` and `gameHeight`.
    7.  **ELSE** (if `status` is > **Reference**: `GameStatusEnum.PLAYING` in `./game-domain.isl.md`):
        - No additional full-screen overlay messages are displayed.
- **Side Effects**: Updates the visual representation of the game's user interface on the display.
- **âœ… Acceptance Criteria**:
    - The current score, remaining lives, and current level number are always displayed in the header during active gameplay and on status screens.
    - When the game status is `START_SCREEN`, the appropriate start message is displayed centrally.
    - When the game status is `PAUSED`, the "PAUSED" message is displayed centrally.
    - When the game status is `GAME_OVER`, the "GAME OVER" message along with the final score is displayed centrally.
    - When the game status is `LEVEL_CLEARED`, a message indicating the cleared level and the upcoming level is displayed centrally.
    - When the game status is `GAME_WON`, a victory message and the total score are displayed centrally.
    - No overlay messages are displayed when the game status is `PLAYING`.
    - All displayed text is clearly legible and correctly formatted.
- **ðŸ§ª Test Scenarios**:
    - **Scenario**: Initial Game State (Start Screen)
        - **Given**: The game has just started.
        - **When**: `renderUI` is called with `status` = `START_SCREEN`, `score` = 0, `lives` = 3, `level` = 1.
        - **Then**: The header displays "SCORE: 0", "LIVES: 3", "LEVEL: 1". A central overlay displays "SPACE INVADERS" and "PRESS START TO PLAY".
    - **Scenario**: Active Gameplay
        - **Given**: The game is in progress.
        - **When**: `renderUI` is called with `status` = `PLAYING`, `score` = 250, `lives` = 2, `level` = 3.
        - **Then**: The header displays "SCORE: 250", "LIVES: 2", "LEVEL: 3". No central overlay message is displayed.
    - **Scenario**: Game Paused
        - **Given**: The game is paused by the player.
        - **When**: `renderUI` is called with `status` = `PAUSED`, `score` = 500, `lives` = 1, `level` = 5.
        - **Then**: The header displays "SCORE: 500", "LIVES: 1", "LEVEL: 5". A central overlay displays "PAUSED".
    - **Scenario**: Level Successfully Cleared
        - **Given**: The player has defeated all invaders in the current level.
        - **When**: `renderUI` is called with `status` = `LEVEL_CLEARED`, `score` = 1000, `lives` = 2, `level` = 7.
        - **Then**: The header displays "SCORE: 1000", "LIVES: 2", "LEVEL: 7". A central overlay displays "LEVEL 7 CLEARED!" and "PREPARING FOR LEVEL 8...".
    - **Scenario**: Game Over
        - **Given**: The player has lost all lives.
        - **When**: `renderUI` is called with `status` = `GAME_OVER`, `score` = 1500, `lives` = 0, `level` = 9.
        - **Then**: The header displays "SCORE: 1500", "LIVES: 0", "LEVEL: 9". A central overlay displays "GAME OVER" and "YOUR SCORE: 1500".
    - **Scenario**: Game Won
        - **Given**: The player has completed all levels.
        - **When**: `renderUI` is called with `status` = `GAME_WON`, `score` = 20000, `lives` = 3, `level` = 10.
        - **Then**: The header displays "SCORE: 20000", "LIVES: 3", "LEVEL: 10". A central overlay displays "CONGRATULATIONS! YOU SAVED THE GALAXY!" and "TOTAL SCORE: 20000".

--- INTERFACE: game-domain.isl.md ---
## Domain Concepts


### Enumeration: GameStatusEnum
Defines the possible states of the game.

ðŸ“¦ **Content**:
- `START_SCREEN`: The initial state before the game begins.
- `PLAYING`: The game is actively running.
- `PAUSED`: The game is temporarily suspended.
- `GAME_OVER`: The player has lost all lives.
- `LEVEL_CLEARED`: The current level has been completed, but the game is not over.
- `GAME_WON`: All levels have been completed.

### Enumeration: EntityTypeEnum
Defines the different types of entities that can exist in the game.

ðŸ“¦ **Content**:
- `PLAYER`: The player's spaceship.
- `INVADER`: An enemy alien ship.
- `PLAYER_BULLET`: A projectile fired by the player.
- `INVADER_BULLET`: A projectile fired by an invader.

### Enumeration: DirectionEnum
Defines the cardinal directions for entity movement.

ðŸ“¦ **Content**:
- `LEFT`: Movement towards the left.
- `RIGHT`: Movement towards the right.
- `UP`: Movement upwards.
- `DOWN`: Movement downwards.

### Data Structure: Position
Represents a 2D coordinate in the game space.

ðŸ“¦ **Content**:
- `x`: `number` - The horizontal coordinate.
- `y`: `number` - The vertical coordinate.

### Data Structure: Size
Represents the dimensions of an entity.

ðŸ“¦ **Content**:
- `width`: `number` - The width of the entity.
- `height`: `number` - The height of the entity.

### Data Structure: EntityState
The base structure for any dynamic object within the game.

ðŸ“¦ **Content**:
- `id`: `string` - A unique identifier for the entity.
- `type`: `EntityTypeEnum` - The classification of the entity.
- `position`: `Position` - The current position of the entity.
- `size`: `Size` - The dimensions of the entity.
- `speed`: `number` - The rate at which the entity moves.
- `direction`: `DirectionEnum` - The current direction of movement.
- `isAlive`: `boolean` - Indicates if the entity is active in the game.

### Data Structure: PlayerState
Represents the specific state of the player's ship.

ðŸ“¦ **Content**:
- `id`: `string` - Unique identifier.
- `type`: `EntityTypeEnum.PLAYER` - Must be PLAYER.
- `position`: `Position` - Current position.
- `size`: `Size` - Dimensions.
- `speed`: `number` - Movement speed.
- `isAlive`: `boolean` - Life status.
- `lives`: `number` - Remaining lives for the player.
- `score`: `number` - Current score of the player.
- `lastShotTime`: `number` - Timestamp of the last bullet fired by the player, used for cooldown.

### Data Structure: InvaderState
Represents the specific state of an invader ship.

ðŸ“¦ **Content**:
- `id`: `string` - Unique identifier.
- `type`: `EntityTypeEnum.INVADER` - Must be INVADER.
- `position`: `Position` - Current position.
- `size`: `Size` - Dimensions.
- `speed`: `number` - Movement speed.
- `direction`: `DirectionEnum` - Current movement direction.
- `isAlive`: `boolean` - Life status.
- `pointsValue`: `number` - Score awarded for destroying this invader.

### Data Structure: BulletState
Represents the specific state of a projectile.

ðŸ“¦ **Content**:
- `id`: `string` - Unique identifier.
- `type`: `EntityTypeEnum.PLAYER_BULLET | EntityTypeEnum.INVADER_BULLET` - Type of bullet.
- `position`: `Position` - Current position.
- `size`: `Size` - Dimensions.
- `speed`: `number` - Movement speed.
- `direction`: `DirectionEnum` - Direction of travel (typically UP for player, DOWN for invader).
- `isAlive`: `boolean` - Life status.
- `ownerId`: `string` - The ID of the entity that fired this bullet.

### Data Structure: LevelConfig
Defines the specific parameters for each game level.

ðŸ“¦ **Content**:
- `levelNumber`: `number` - The sequential number of the level.
- `invaderSpeedMultiplier`: `number` - A multiplier applied to the base invader speed for this level.
- `invaderBulletFrequencyMultiplier`: `number` - A multiplier affecting how often invaders fire for this level.
- `invaderRows`: `number` - The number of invader rows for this level.
- `invaderColumns`: `number` - The number of invader columns for this level.
- `invaderInitialYOffset`: `number` - The initial Y position offset for the invader fleet.

### Configuration: GameConstants
Defines all static, immutable constants used throughout the game.

ðŸ“¦ **Content**:
- `GAME_WIDTH`: `number` - The width of the game board in arbitrary units (e.g., pixels).
- `GAME_HEIGHT`: `number` - The height of the game board in arbitrary units.
- `PLAYER_WIDTH`: `number` - The width of the player ship.
- `PLAYER_HEIGHT`: `number` - The height of the player ship.
- `PLAYER_SPEED_INITIAL`: `number` - The base movement speed of the player ship.
- `PLAYER_BULLET_WIDTH`: `number` - The width of a player bullet.
- `PLAYER_BULLET_HEIGHT`: `number` - The height of a player bullet.
- `PLAYER_BULLET_SPEED`: `number` - The speed of player bullets.
- `PLAYER_BULLET_COOLDOWN_MS`: `number` - The minimum time in milliseconds between player shots.
- `PLAYER_LIVES_INITIAL`: `number` - The number of lives the player starts with.
- `INVADER_WIDTH`: `number` - The width of an invader ship.
- `INVADER_HEIGHT`: `number` - The height of an invader ship.
- `INVADER_SPEED_INITIAL`: `number` - The base horizontal movement speed of invaders.
- `INVADER_VERTICAL_STEP`: `number` - The vertical distance invaders move down when changing horizontal direction.
- `INVADER_BULLET_WIDTH`: `number` - The width of an invader bullet.
- `INVADER_BULLET_HEIGHT`: `number` - The height of an invader bullet.
- `INVADER_BULLET_SPEED`: `number` - The speed of invader bullets.
- `INVADER_BULLET_MIN_COOLDOWN_MS`: `number` - The minimum time in milliseconds between invader shots.
- `INVADER_BULLET_MAX_COOLDOWN_MS`: `number` - The maximum time in milliseconds between invader shots.
- `INVADER_INITIAL_ROWS`: `number` - The default number of invader rows at the start of a level.
- `INVADER_INITIAL_COLUMNS`: `number` - The default number of invader columns at the start of a level.
- `INVADER_POINTS_VALUE`: `number` - The score awarded for destroying a single invader.
- `GAME_TICK_INTERVAL_MS`: `number` - The interval in milliseconds for the game loop update.
- `MAX_LEVELS`: `number` - The total number of levels in the game (must be at least 10).
- `INVADER_MOVE_INTERVAL_MS`: `number` - The base interval in milliseconds for invader horizontal movement.
- `LEVEL_CLEARED_DISPLAY_DURATION_MS`: `number` - The duration in milliseconds for which the 'Level Cleared' message is displayed.

### Configuration: Levels
Defines the specific configurations for each of the game's levels.

ðŸ“¦ **Content**:
- `LEVEL_CONFIGURATIONS`: `LevelConfig[]` - An array containing `LevelConfig` objects for all levels.
  - **Constraint**: The array MUST contain `MAX_LEVELS` entries.
  - **Constraint**: Each `levelNumber` in the array MUST be unique and sequential from 1 to `MAX_LEVELS`.
  - **Example Structure**:
    ```
    [
      {
        levelNumber: 1,
        invaderSpeedMultiplier: 1.0,
        invaderBulletFrequencyMultiplier: 1.0,
        invaderRows: 5,
        invaderColumns: 11,
        invaderInitialYOffset: 50
      },
      {
        levelNumber: 2,
        invaderSpeedMultiplier: 1.1,
        invaderBulletFrequencyMultiplier: 1.1,
        invaderRows: 5,
        invaderColumns: 11,
        invaderInitialYOffset: 50
      },
      // ... up to MAX_LEVELS
    ]
    ```

### ðŸš¨ Global Constraints
- All `id` fields for `EntityState` and its derived types MUST be unique across all active entities at any given time.
- All `speed` values MUST be non-negative.
- All `width` and `height` values MUST be positive.
- `MAX_LEVELS` MUST be greater than or equal to 10.
- `GAME_WIDTH` and `GAME_HEIGHT` MUST be positive integers.
- `PLAYER_BULLET_COOLDOWN_MS` and `INVADER_BULLET_MIN_COOLDOWN_MS` MUST be non-negative.
- `INVADER_BULLET_MAX_COOLDOWN_MS` MUST be greater than or equal to `INVADER_BULLET_MIN_COOLDOWN_MS`.
- `GAME_TICK_INTERVAL_MS` MUST be a positive integer.
- `INVADER_MOVE_INTERVAL_MS` MUST be a positive integer.
- `LEVEL_CLEARED_DISPLAY_DURATION_MS` MUST be a positive integer.
- `LEVEL_CONFIGURATIONS` MUST define configurations for all levels from 1 to `MAX_LEVELS`.
- For each `LevelConfig`, `invaderRows` and `invaderColumns` MUST be positive integers.
- For each `LevelConfig`, `invaderSpeedMultiplier` and `invaderBulletFrequencyMultiplier` MUST be positive numbers.
- For each `LevelConfig`, `invaderInitialYOffset` MUST be a non-negative number.




## Canonical Rules (NORMATIVE)

### Rule 1: Semantic Markers
Sections with emoji are **NORMATIVE** (must implement exactly):
- âš¡ Capabilities/Methods
- ðŸš¨ Constraints
- âœ… Acceptance Criteria
- ðŸ§ª Test Scenarios

Sections without normative emoji are **INFORMATIVE** (guidance only):
- ðŸ“ Appearance/Interface
- ðŸ“¦ Content/Structure
- ðŸ’¡ Implementation Hints

### Rule 4: ISL Boundary (Critical)
ISL defines **intent and behavior**, NOT implementation.
**MUST**:
- Define observable behavior
- Describe what system does
- Express logic as intent/rules/outcomes
- Remain implementation-agnostic
**MUST NOT**:
- Describe step-by-step algorithms
- Be written as pseudocode
- Act as Technical Design Document
- Contain low-level control flow tied to syntax

**Flow Syntax Constraints**:
Flows MUST describe intent/operations using natural language, NOT implementation code or pseudocode.
â›” FORBIDDEN:
- The word "Call" or "Invoke" targeting a specific method (e.g., "Call renderScore", "Invoke GameCanvas.render").
- Pseudocode syntax (e.g., "execute(param)", "object.method()").
âœ… REQUIRED:
- Use descriptive verbs describing the *intent* (e.g., "Display the score", "Calculate the total", "Update the state", "GameScreen updates content", "Component updates layout").
- For component interactions, use: "Trigger", "Dispatch", "Request", or "Pass data to" (e.g. "Trigger GameEngine update", NOT "Call GameEngine.update").


**Supported Control Structures**:
- `IF...THEN...ELSE`
- `FOR EACH...IN`
- `WHILE condition`
- `TRY...CATCH`
- `BRANCH: [conditions]`

### Rule 5: Role Separation
- **Presentation**: MUST define visual appearance. MUST NOT implement business logic.
- **Backend**: MUST define API contracts. MUST NOT define visual properties.

### Rule 6: Content Semantics (Structural Composition)
The `ðŸ“¦ Content` section defines the **Structural Composition** of the component.
- **For Leaf Components**: Describes visual elements (buttons, text, inputs).
- **For Container Components**: Lists the **Child Components** included in this view.
  - **Usage**: Use this section to declare *what* is rendered (e.g., "Contains `Header` and `Footer`"), NOT the `Flow` section.
  - **Layout**: Describe how children are arranged (e.g., "Sidebar on left, Grid on right").

## Document Structure
   - ## Domain Concepts (Optional)
   - ## Component: [Name]
     - ### Role: [Presentation | Backend | Business Logic]
     - **Signature**: [Input Props / Constructor Args]
     - ### ðŸ“ Appearance (Only for Presentation)
     - ### ðŸ“¦ Content (Only for Presentation)
     - ### âš¡ Capabilities
       - #### [capabilityName]
         - **Contract**: [Description]
         - **Signature**: Input/Output
         - **Trigger**: [Event]
         - **Flow** (if logic is complex)
         - **Side Effects**
         - **Cleanup**
         - **ðŸ’¡ Implementation Hint**
         - **ðŸš¨ Constraint**
         - **âœ… Acceptance Criteria**
         - **ðŸ§ª Test Scenarios**
     - ### ðŸ’¡ Global Hints
     - ### ðŸš¨ Global Constraints
     - ### âœ… Acceptance Criteria
     - ### ðŸ§ª Test Scenarios

## RFC 2119 Keywords
- **MUST**: Absolute requirement
- **MUST NOT**: Absolute prohibition
- **SHOULD**: Strong preference


**INTEGRATION RULES**:
1. You are aware of the full system plan (see below), but your focus is ONLY on **main.isl.md**.
2. If you need to refer to concepts in your dependencies, use the ISL reference syntax:
   `> **Reference**: [Concept] in ./dependency-filename.isl.md`
3. Do NOT generate code for other files.
4. **MISSING DEPENDENCIES**:
   If a required capability is missing in a dependency (visible in DEPENDENCY INTERFACES), do NOT hallucinate it.
   Instead, output a request to update the dependency using this format:
   #[DEPENDENCY_UPDATE_REQUEST]
   {
     "targetFilename": "filename.isl.md",
     "description": "Add capability 'X' to handle Y."
   }
   #[DEPENDENCY_UPDATE_REQUEST-END]
5. **MISSING DEPENDENCY FILE**:
   If you need to access types or capabilities from a file that is NOT in your dependencies list (e.g. Domain Enums), request it:
   #[MISSING_DEPENDENCY_FILE]
   {
     "filename": "domain.isl.md",
     "reason": "Need access to GameStatusEnum"
   }
   #[MISSING_DEPENDENCY_FILE-END]

**OUTPUT RULES**:
- Do NOT output the Project Name or Metadata Header.
- **MANDATORY**: You MUST start the file content with a list of references for ALL dependencies listed in your 'Dependencies' context:
  > **Reference**: Concepts/Capabilities in `./game-logic.isl.md`
  > **Reference**: Concepts/Capabilities in `./game-board-presentation.isl.md`
  > **Reference**: Concepts/Capabilities in `./game-ui-presentation.isl.md`
  > **Reference**: Concepts/Capabilities in `./game-domain.isl.md`
  (Adjust the description text as appropriate for the dependency role).
- Return ONLY the markdown content for main.isl.md.


--- ROLE: user ---

**ARCHITECT'S PLAN (Global Context)**:
- **game-domain.isl.md** [Domain]
  Description: Defines core game entities, configurations, and enumerations for the Space Invaders game. This includes all static data structures and constants.
  Dependencies: None

- **game-logic.isl.md** [Business Logic]
  Description: Manages the entire game state, including the game loop, entity movements, collision detection, scoring, and level progression. It encapsulates all game rules and calculations.
  Dependencies: game-domain.isl.md

- **game-board-presentation.isl.md** [Presentation]
  Description: Responsible for rendering the visual elements of the game board, including the player ship, invader fleet, and all active bullets. It translates game state into visual components.
  Dependencies: game-domain.isl.md

- **game-ui-presentation.isl.md** [Presentation]
  Description: Handles the rendering of non-game-board user interface elements such as the current score, level number, remaining lives, and various game status screens (start, paused, game over).
  Dependencies: game-domain.isl.md

- **main.isl.md** [Presentation]
  Description: The main entry point and orchestrator of the Space Invaders application. It initializes the game logic, sets up the primary game loop, handles global user input events, and combines all presentation components to render the complete application.
  Dependencies: game-logic.isl.md, game-board-presentation.isl.md, game-ui-presentation.isl.md, game-domain.isl.md

**ORIGINAL REQUIREMENTS**:
"Progetta un clone per il gioco space invaders con ReacJs(javascript), deve essere molto simile e avere almeno 10 livelli"

